---
title: Using enhanced dataset metadata in Power BI Desktop
description: This article describes how to use enhanced dataset metadata in Power BI.
author: davidiseminger
ms.author: davidi
ms.reviewer: ''
ms.service: powerbi
ms.subservice: pbi-data-sources
ms.topic: conceptual
ms.date: 09/22/2020
LocalizationGroup: Connect to data
---
# Using enhanced dataset metadata

When Power BI Desktop creates reports, it also creates dataset metadata in the corresponding PBIX and PBIT files. Previously the metadata was stored in a format that was specific to Power BI Desktop. It used base-64 encoded M expressions and data sources, and assumptions were made about how that metadata was stored.

With the release of the **enhanced dataset metadata** feature, many of these limitations are removed. PBIX files are automatically upgraded to enhanced metadata upon opening the file. With **enhanced dataset metadata**, metadata created by Power BI Desktop uses a format similar to what is used for Analysis Services tabular models, based on the [Tabular Object Model](/analysis-services/tom/introduction-to-the-tabular-object-model-tom-in-analysis-services-amo).


The **enhanced dataset metadata** feature is strategic and foundational, because future Power BI functionality will be built upon its metadata. Some additional capabilities that stand to benefit from enhanced dataset metadata include [XMLA read/write](/power-platform-release-plan/2019wave2/business-intelligence/xmla-readwrite) for management of Power BI datasets, and the migration of Analysis Services workloads to Power BI to benefit from next-generation features.

## Limitations
Prior to Enhanced Metadata support, for QL Server, Oracle, Teradata and legacy HANA connections, Power BI Desktop would add a native query to the data model and this query is used by Power BI Service data models. With Enhanced Metadata support, Power BI Service data model regenerates the native query at runtime instead of using the one generated by Power BI Desktop. In most cases, this retrieval will resolve itself correctly, but there are some transformations that will not work without reading underlying data. This may show some errors in reports that previously worked. The error will say: “Unable to convert an M query in table 'Dimension City' into a native source query. Please try again later or contact support. If you contact support please provide these details." To warn you, Power BI Desktop has three different places where you can fix your queries:
1.	When you apply changes or perform a refresh
2.	In a warning bar in the PQ Editor informing you that the expression couldn’t be folded to the data source.
3.	When you run evaluations when you open a report to check if you have unsupported queries. Running these evaluations can result in performance implications.


## Next steps

You can do all sorts of things with Power BI Desktop. For more information on its capabilities, check out the following resources:

* [What is Power BI Desktop?](../fundamentals/desktop-what-is-desktop.md)
* [What's new in Power BI Desktop?](../fundamentals/desktop-latest-update.md)
* [Query overview with Power BI Desktop](../transform-model/desktop-query-overview.md)
* [Data types in Power BI Desktop](desktop-data-types.md)
* [Shape and combine data with Power BI Desktop](desktop-shape-and-combine-data.md)
* [Common query tasks in Power BI Desktop](../transform-model/desktop-common-query-tasks.md)
